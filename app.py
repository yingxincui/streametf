import streamlit as st
from data import get_etf_list

# 设置页面配置
st.set_page_config(
    page_title="ETF回测与分析工具",
    page_icon="📊",
    layout="wide"
)

# 可选：添加logo（如有logo.png放在项目根目录）
# st.image("logo.png", width=120)

st.title("📊 ETF回测与分析工具")

# 添加刷新ETF缓存列表按钮
if st.button("🔄 刷新ETF缓存列表"):
    with st.spinner("正在刷新ETF列表缓存..."):
        get_etf_list(force_refresh=True)
    st.success("ETF列表缓存已刷新！")

st.markdown("""
---

## 🚀 功能导航

### 基础回测与分析

1. **组合回测**  
   多ETF自定义权重历史回测，支持保存/加载组合和年度再平衡。

2. **定投回测**  
   ETF定投策略模拟，支持权重分配与定投日设置。

3. **有效前沿分析**  
   蒙特卡洛模拟，寻找最优风险收益组合，支持保存/加载分析参数。

4. **动量策略回测**  
   多ETF动量轮动策略，支持参数自定义和历史回测。

5. **轮动回测**  
   多ETF动量轮动策略，支持参数自定义和历史回测。

6. **价值平均定投回测**  
   支持目标市值递推/自定义，自动对比普通定投。

### 经典策略与对比

7. **永久组合回测**  
   经典永久组合策略回测，包含黄金、股票、债券、现金四大类资产。

8. **永久组合对比**  
   多种永久组合版本收益、回撤、波动等指标对比。

### 行业与指数分析

9. **指定ETF月均涨跌幅分析**  
   分析指定ETF近3/5/10年各月平均涨跌幅，挖掘季节性规律。

10. **ETF近20日涨幅排行**  
    场内基金近一月涨幅前50/后50排行，快速筛选强弱势基金。

11. **主要指数云图监控**  
    监控A股主要指数阶段涨跌幅，热力色块可视化。

### 基金筛选与监控

12. **场内基金筛选**  
    按年化收益率、成立年限等条件筛选场内基金。

13. **红利基金筛选**  
    场内红利基金筛选，支持年化收益率、成立年限等条件。

14. **开放式基金排行筛选**  
    按近3年年化收益率、成立时间等筛选开放式基金。

15. **基金溢价监控**  
    QDII/LOF/ETF等基金T-1日溢价率监控，支持阈值筛选。

### 理念与工具

16. **投资大师理念**  
    纳瓦尔、芒格、巴菲特等投资理念与经典语录。

17. **财富自由计算器**  
    4%法则财富自由目标测算，支持储蓄率、收益率等参数。

---

> 💡 **建议**：请通过左侧导航栏选择功能页面，每个页面均可自定义参数，点击按钮运行分析。
> 
> 支持保存/加载自定义组合，便于多次复用。支持导出PDF报告，便于分享和归档。
""")